{% extends "base.html" %}
{% load static %}

{% block title %}Témoignages — Mon Journal{% endblock %}

{% block extra_css %}
<style>
:root{ --page-bg:#f7f8fa; --accent:#1a73e8; --muted:#5f6b73; --border:#e6e7ea }
body{ background:var(--page-bg) }
.card{ width:600px; max-width:95vw; background:#fff; border-radius:14px; padding:34px 56px; margin:40px auto; border:1px solid var(--border) }
.input-box{ border:1px solid var(--border); border-radius:6px; padding:14px; margin-bottom:12px; min-height:56px; display:flex; align-items:center }
.input-box input, .input-box textarea{ border:0; outline:none; font-size:16px; width:100%; background:transparent; resize:none }
.btn-join{ background:#16a34a; color:#fff; padding:10px 18px; border-radius:8px; border:none; font-weight:600; cursor:pointer }
.error{ color:#b00020; font-size:0.95rem; margin-bottom:12px }
.testimonial{ border:1px solid var(--border); border-radius:8px; padding:16px; margin-bottom:14px; background:#f9fafb }
.testimonial p{ margin:0; font-size:15px; color:#333 }
.testimonial small{ display:block; margin-top:6px; color:var(--muted) }
</style>
{% endblock %}

{% block content %}
<main class="card" role="main" aria-labelledby="title">
  <h1 id="title" style="text-align:center; font-size:22px; font-weight:700; margin-bottom:20px; color:#1a73e8">Vos témoignages</h1>

  <!-- Formulaire -->
  <form method="post">
    {% csrf_token %}

    <div class="input-box">{{ form.nom }}</div>
    {% if form.nom.errors %}<div class="error">{% for e in form.nom.errors %}{{ e }}{% endfor %}</div>{% endif %}

    <div class="input-box">{{ form.message }}</div>
    {% if form.message.errors %}<div class="error">{% for e in form.message.errors %}{{ e }}{% endfor %}</div>{% endif %}

    <div style="display:flex; justify-content:flex-end; margin-top:12px;">
      <button class="btn-join" type="submit">Publier</button>
    </div>
  </form>

  <hr style="margin:30px 0; border:0; border-top:1px solid var(--border)" />

<div class="mt-6">
  <h4 class="text-lg font-semibold text-slate-700 mb-4 text-center">
  {% if temoignages %}
  <div class="swiper mySwiper">
    <div class="swiper-wrapper">
      {% for t in temoignages %}
      <div class="swiper-slide p-4 bg-white rounded-lg shadow border">
        <p class="text-slate-700 italic mb-2">“{{ t.message }}”</p>
        <span class="text-xs text-slate-500">— {{ t.nom }}, {{ t.date|date:"j F Y" }}</span>
      </div>
      {% endfor %}
    </div>

    <!-- Navigation -->
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>

    <!-- Pagination -->
    <div class="swiper-pagination mt-2"></div>
  </div>
  {% else %}
    <p class="text-xs text-slate-500 mt-2">Aucun témoignage pour le moment.</p>
  {% endif %}
</div>

</main>
{% endblock %}
